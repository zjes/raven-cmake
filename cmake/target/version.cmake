function(set_version name prefix)
    if (PROJECT_VERSION)
        get_target_property(type ${name} TYPE)
        if (NOT "${type}" STREQUAL "INTERFACE_LIBRARY")
            string(TOUPPER ${prefix} upName)
            string(REPLACE "-" "_" upName ${upName})
            target_compile_definitions(${name} PUBLIC "${upName}_VERSION=\"${PROJECT_VERSION}\"")
            target_compile_definitions(${name} PUBLIC "${upName}_VERSION_MAJOR=${PROJECT_VERSION_MAJOR}")
            target_compile_definitions(${name} PUBLIC "${upName}_VERSION_MINOR=${PROJECT_VERSION_MINOR}")
            target_compile_definitions(${name} PUBLIC "${upName}_VERSION_PATCH=${PROJECT_VERSION_PATCH}")
        endif()
    endif()
endfunction()
